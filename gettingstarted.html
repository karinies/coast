<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>COAST - Getting started</title>
<link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet"
        type="text/css">
<link rel="stylesheet" href="css/prism.css">
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="wrapper">
<header>
  <div class="container">
    <h2 class="lone-header">COmputationAl State Transfer (COAST)</h2>
  </div>
</header>
<section>
  <div class="container">
    <ul class="docs-nav">
      <li><a href="index.html" class="cc-active">Home</a></li>
      <li class="separator"></li>
      <li><strong>Creating islands</strong></li>
      <li><a href="#hello" class="cc-active">The "Hello World!" island</a></li>
      <li><a href="#hello_two" class="cc-active">"Hello World!" with two islands</a></li>
      <li><strong>Inter-islet communication</strong></li>
    </ul>
    <div class="docs-content">
      <h2 id="hello">Creating islands</h2>

    Clarification about "COAST" and "Motile/Island".

      <h3 id="hello">The "Hello World!" island</h3>

      This example shows how to print a "Hello World!" message using the Island infrastructure. It instantiates an island called Alice, starts it up, and Alice prints the message. Notice that, in this example, we are not using CURLs or any Motile code, it is only a single island printing a message.

      <h4>Preparing Racket to work with Island</h4>

      <p>First thing that we need for working with COAST is to create a Racket file and to add the proper libraries. Create a file and name it <i>hello.rkt</i> and add the following code:</p>

       
<pre><code class="language-scheme">#lang racket/base

;; Basic requires to work with Island
(require
  Island/include/base)</code></pre>

<p>That tells Racket that we will use the racket/base language and that we require Island/include/base, the basic component of the Island framework.</p>

<h4>1) Setting up certificates</h4>

<p>There is some boilerplate code that you will require to setup the certificates. For these examples, we will use the default islands (alice, bob, carol...) because they come with default certificates, but you can check out here how to create your own certificates. In the same <i>hello.rkt</i> file, add the following code:</p>

<pre><code class="language-scheme">;; Boilerplate to setup Alice's certificates. You will need them to create Alice island.
(define CERTIFICATE/SECRET "./certificates/secret/")
(define ALICE/SECRET/PATH (string-append CERTIFICATE/SECRET "alice_secret"))

;; Create Alice's CURVE cryptographic keys
(define ALICE/CURVE/SECRET (path-to-curve ALICE/SECRET/PATH))</code></pre>

<p>That will let Island know where your certificates are (make sure that the path is correct). It will use <i>alice_secret</i> file to create the CURVE cryptographic keys for Alice.</p>

<p>Now we're ready to start adding our code in Alice.</p>

<h4>2) Creating the first computation</h4>

<p>We need an initial computation to bootstrap Alice, that is, to tell Alice what to do first:</p>

<pre><code class="language-scheme">;; The bootstrap computation for Alice island to say "Hello World!"
(define (alice/boot)
  (display "Hello World!"))</code></pre>

<p>We are creating a computation that will only print <i>"Hello World!"</i> and will do nothing else.</p>

<h4>3) Instantiating Alice</h4>

<pre><code class="language-scheme">;; Instantiate Alice island
(define alice (island/new 'alice ALICE/CURVE/SECRET alice/boot))</code></pre>

<h4>4) Running the example</h4>

<p>Now, hit <i>"Run"</i> on DrRacket to execute your code, and then type on the DrRacket's console:</p>

<pre><code class="language-scheme">(island/start alice)</code></pre>

<p>Don't forget to press enter after each command in the DrRacket's console.</p>

<p>If everything went right, you will see "Wello World!" in the console.</p>

<p>Now, shutdown Alice by typing:</p>

<pre><code class="language-scheme">(island/destroy alice)</code></pre>

<p>That was it!</p>

<p>In this example, we have seen how to create a computation using the Island infrastructure. We setup Racket, load the certificates, and created an initial computation.</p>

<h4>Entire source code</h4>

<p>See the entire <i>hello.rkt</i> file here:</p>

<div class="source-all">
  <pre class="line-numbers"><code class="language-scheme">#lang racket/base

;; Basic requires to work with Island
(require
  Island/include/base)

;; Boilerplate to setup Alice's certificates. You will need them to create Alice island.
(define CERTIFICATE/SECRET "./certificates/secret/")
(define ALICE/SECRET/PATH (string-append CERTIFICATE/SECRET "alice_secret"))

;; Create Alice's CURVE cryptographic keys
(define ALICE/CURVE/SECRET (path-to-curve ALICE/SECRET/PATH))

;; The bootstrap computation for Alice island to say "Hello World!"
(define (alice/boot)
  (display "Hello World!"))

;; Instantiate Alice island
(define alice (island/new 'alice ALICE/CURVE/SECRET alice/boot))</code></pre>
</div>

<hr />

<h3 id="hello_two">"Hello World!" with two islands</h3>

<p>In this example we will create two islands that will print the same message but they will not communicate with each other. It is quite similar as the previous one but this time Alice, and the new island, Bob, will introduce themselves.</p>

<h4>1) Setting up Racket, library, and certificates</h4>

<p>We will not explain again this boilerplate code since we did it in the previous example, but don't forget to include it:</p>

<pre><code class="language-scheme">#lang racket/base

(require
  Island/include/base
)

(define CERTIFICATE/PUBLIC "./certificates/public/")
(define CERTIFICATE/SECRET "./certificates/secret/")
(define ALICE/SECRET/PATH (string-append CERTIFICATE/SECRET "alice_secret"))
(define BOB/SECRET/PATH   (string-append CERTIFICATE/SECRET "bob_secret"))

(define ALICE/CURVE/SECRET (path-to-curve ALICE/SECRET/PATH))
(define BOB/CURVE/SECRET   (path-to-curve BOB/SECRET/PATH))</code></pre>

<h4>2) Creating a computation for Alice and Bob</h4>

<p>Now, we define a function that will be used for both Alice and Bob:</p>

<pre><code class="language-scheme">(define (islet/hello)
  (display (format "Hi, I am ~a" (island/nickname (this/island)))))</code></pre>

<h4>3) Instantiating Alice and Bob</h4>

<p>The following code instantiates both islands:</p>

<pre><code class="language-scheme">(define alice (island/new 'alice ALICE/CURVE/SECRET islet/hello))
(define bob   (island/new 'bob   BOB/CURVE/SECRET   islet/hello))</code></pre>

<h4>4) Running the example</h4>

<p>Finally, from the console we type:</p>

<pre><code class="language-scheme">(island/start alice)
(island/start bob)</code></pre>

<p>Alice will say "Hi, I am Alice", and Bob will say "Hi, I am Bob". Notice the use of <code class="language-scheme">(this/island)</code> and <code class="language-scheme">(island/name)</code>. The former returns the island executing the computation. The latter returns the nickname of a given island.</p>

<h4>Entire source code</h4>

<p>Here is the entire source code:</p>
<pre><code class="language-scheme">#lang racket/base

(require
  Island/include/base
)

(define CERTIFICATE/PUBLIC "./certificates/public/")
(define CERTIFICATE/SECRET "./certificates/secret/")
(define ALICE/SECRET/PATH (string-append CERTIFICATE/SECRET "alice_secret"))
(define BOB/SECRET/PATH   (string-append CERTIFICATE/SECRET "bob_secret"))

(define ALICE/CURVE/SECRET (path-to-curve ALICE/SECRET/PATH))
(define BOB/CURVE/SECRET   (path-to-curve BOB/SECRET/PATH))

(define (islet/hello)
  (display (format "Hi, I am ~a" (island/nickname (this/island)))))

(define alice (island/new 'alice ALICE/CURVE/SECRET islet/hello))
(define bob   (island/new 'bob   BOB/CURVE/SECRET   islet/hello))</code></pre>


</section>
<section class="vibrant centered">
  <div class="">
    This material is based upon work supported by the National Science Foundation under Grant Numbers  CNS-1449159, CCF-0820222 and 
    CCF-0917129. Any opinions, findings, and conclusions or recommendations expressed in this material are those of 
    the author(s) and do not necessarily reflect the views of the National Science Foundation.
  </div>
</section>
</div>
<script src="js/jquery.min.js"></script> 
<script type="text/javascript" src="js/prism/prism.js"></script> 
<script src="js/layout.js"></script>
</body>
</html>
